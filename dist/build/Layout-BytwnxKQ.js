const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["strapi-Bz8I0DhC.js","strapi-D6821bIJ.css"])))=>i.map(i=>d[i]);
import{r as f,aA as _,cu as I,a7 as w,J as T,cv as A,bk as D,a6 as C,u as P,s as B,aB as O,j as e,cw as m,b8 as R,cx as U,o as G,cy as H,av as K,d as E,aC as F,L as V,cz as $}from"./strapi-Bz8I0DhC.js";import{s as z}from"./sortBy-SzWbmvto.js";import{s as J}from"./selectors-BEe7M74R.js";import"./_baseMap-jL5e2pGl.js";import"./_baseEach-D5uQ5RO5.js";const W=n=>n.map(i=>{const l=i.links.map(r=>({...r,isDisplayed:!1}));return{...i,links:l}}),q=()=>{const[{isLoading:n,menu:i},l]=f.useState({isLoading:!0,menu:[]}),r=_("useSettingsMenu",s=>s.checkUserHasPermissions),b=I("useSettingsMenu",s=>s.shouldUpdateStrapi),u=w("useSettingsMenu",s=>s.settings),c=T(J),h=f.useMemo(()=>A(),[]),{admin:a,global:t}=D(h,async()=>(await C(async()=>{const{SETTINGS_LINKS_EE:s}=await import("./strapi-Bz8I0DhC.js").then(o=>o.iR);return{SETTINGS_LINKS_EE:s}},__vite__mapDeps([0,1]))).SETTINGS_LINKS_EE(),{combine(s,o){return{admin:[...o.admin,...s.admin],global:[...s.global,...o.global]}},defaultValue:{admin:[],global:[]}}),S=f.useCallback(s=>{if(!s.id)throw new Error("The settings menu item must have an id attribute.");return{...s,permissions:c.settings?.[s.id]?.main??[]}},[c.settings]);return f.useEffect(()=>{const s=async()=>{const v=await(x=>Promise.all(x.reduce((g,L,k)=>{const j=L.links.map(async(y,p)=>({hasPermission:(await r(y.permissions)).length>0,sectionIndex:k,linkIndex:p}));return[...g,...j]},[])))(M);l(x=>({...x,isLoading:!1,menu:M.map((g,L)=>({...g,links:g.links.map((k,j)=>{const y=v.find(p=>p.sectionIndex===L&&p.linkIndex===j);return{...k,isDisplayed:!!y?.hasPermission}})}))}))},{global:o,...N}=u,M=W([{...o,links:z([...o.links,...t.map(S)],d=>d.id).map(d=>({...d,hasNotification:d.id==="000-application-infos"&&b}))},{id:"permissions",intlLabel:{id:"Settings.permissions",defaultMessage:"Administration Panel"},links:a.map(S)},...Object.values(N)]);s()},[a,t,u,b,S,r]),{isLoading:n,menu:i.map(s=>({...s,links:s.links.filter(o=>o.isDisplayed)}))}},Q=G(H)`
  border-radius: 50%;
  padding: ${({theme:n})=>n.spaces[2]};
  height: 2rem;
`,X=({menu:n})=>{const{formatMessage:i}=P(),{trackUsage:l}=B(),{pathname:r}=O(),u=n.filter(a=>!a.links.every(t=>t.isDisplayed===!1)).map(a=>({...a,title:a.intlLabel,links:a.links.map(t=>({...t,title:t.intlLabel,name:t.id}))})),c=i({id:"global.settings",defaultMessage:"Settings"}),h=a=>()=>{l("willNavigate",{from:r,to:a})};return e.jsxs(m.Main,{"aria-label":c,children:[e.jsx(m.Header,{label:c}),e.jsx(R,{background:"neutral150",marginBottom:5}),e.jsx(m.Sections,{children:u.map(a=>e.jsx(m.Section,{label:i(a.intlLabel),children:a.links.map(t=>e.jsx(m.Link,{to:t.to,onClick:h(t.to),label:i(t.intlLabel),endAction:e.jsxs(e.Fragment,{children:[t?.licenseOnly&&e.jsx(U,{fill:"primary600",width:"1.5rem",height:"1.5rem"}),t?.hasNotification&&e.jsx(Q,{"aria-label":"Notification",backgroundColor:"primary600",textColor:"neutral0",children:"1"})]})},t.id))},a.id))})]})},as=()=>{const n=K("/settings/:settingId/*"),{formatMessage:i}=P(),{isLoading:l,menu:r}=q();return l?e.jsx(E.Loading,{}):n?.params.settingId?e.jsxs(V.Root,{sideNav:e.jsx(X,{menu:r}),children:[e.jsx(E.Title,{children:i({id:"global.settings",defaultMessage:"Settings"})}),e.jsx($,{})]}):e.jsx(F,{to:"application-infos"})};export{as as Layout};
